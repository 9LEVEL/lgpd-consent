<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema LGPD - Demo Completo</title>
    
    <!-- CSS Local do Cookieconsent -->
    <link rel="stylesheet" href="css/cookieconsent.css">
    
    <!-- CSS Customizado -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f8f9fa;
        }
        
        /* Header */
        header {
            background: #1a1a2e;
            color: white;
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        nav {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: #fff;
        }
        
        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }
        
        .nav-links a {
            color: white;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .nav-links a:hover {
            color: #4a7c7e;
        }
        
        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            padding: 100px 20px;
            text-align: center;
        }
        
        .hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            animation: fadeInUp 0.8s ease;
        }
        
        .hero p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            opacity: 0.9;
            animation: fadeInUp 0.8s ease 0.2s backwards;
        }
        
        .cta-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            animation: fadeInUp 0.8s ease 0.4s backwards;
        }
        
        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }
        
        .btn-primary {
            background: #4a7c7e;
            color: white;
        }
        
        .btn-primary:hover {
            background: #5a8c8e;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: transparent;
            color: white;
            border: 2px solid white;
        }
        
        .btn-secondary:hover {
            background: white;
            color: #1a1a2e;
        }
        
        /* Status Dashboard */
        .dashboard {
            max-width: 1200px;
            margin: -50px auto 50px;
            padding: 0 20px;
            position: relative;
            z-index: 10;
        }
        
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .status-card {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }
        
        .status-card:hover {
            transform: translateY(-5px);
        }
        
        .status-card h3 {
            color: #1a1a2e;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .status-icon {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }
        
        .status-active { background: #d4edda; color: #155724; }
        .status-inactive { background: #f8d7da; color: #721c24; }
        .status-pending { background: #fff3cd; color: #856404; }
        
        .cookie-item {
            padding: 10px;
            margin: 10px 0;
            background: #f8f9fa;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
        }
        
        .badge-success { background: #d4edda; color: #155724; }
        .badge-danger { background: #f8d7da; color: #721c24; }
        .badge-warning { background: #fff3cd; color: #856404; }
        
        /* Features Section */
        .features {
            padding: 80px 20px;
            background: white;
        }
        
        .features-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .features h2 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 50px;
            color: #1a1a2e;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 40px;
        }
        
        .feature-card {
            text-align: center;
            padding: 20px;
        }
        
        .feature-icon {
            width: 80px;
            height: 80px;
            background: #f0f6f6;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 2rem;
        }
        
        .feature-card h3 {
            color: #1a1a2e;
            margin-bottom: 15px;
        }
        
        /* Demo Section */
        .demo-section {
            padding: 80px 20px;
            background: #f8f9fa;
        }
        
        .demo-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .demo-container h2 {
            color: #1a1a2e;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .demo-button {
            padding: 15px;
            border: 2px solid #4a7c7e;
            background: white;
            color: #4a7c7e;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }
        
        .demo-button:hover {
            background: #4a7c7e;
            color: white;
        }
        
        /* Console */
        .console {
            background: #1a1a2e;
            color: #0f0;
            padding: 20px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            max-height: 200px;
            overflow-y: auto;
            margin-top: 20px;
        }
        
        .console-line {
            margin: 5px 0;
            opacity: 0;
            animation: fadeIn 0.5s forwards;
        }
        
        /* Footer */
        footer {
            background: #1a1a2e;
            color: white;
            padding: 40px 20px;
            text-align: center;
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .footer-links a {
            color: white;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-links a:hover {
            color: #4a7c7e;
        }
        
        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeIn {
            to { opacity: 1; }
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 { font-size: 2rem; }
            .nav-links { display: none; }
            .features h2 { font-size: 2rem; }
            .dashboard { margin-top: 30px; }
        }
        
        /* Aviso File Protocol */
        .file-warning {
            background: #fff3cd;
            border: 1px solid #ffeeba;
            color: #856404;
            padding: 15px 20px;
            margin: 20px auto;
            max-width: 1200px;
            border-radius: 5px;
            display: none;
            animation: fadeInUp 0.5s ease;
        }
        
        .file-warning.show {
            display: block;
        }
        
        .file-warning h4 {
            margin: 0 0 10px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        #cc-main .cm {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
        }
        
        #cc-main .pm {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
        }
        
        .cookie-test {
            margin: 20px 0;
            padding: 20px;
            background: #f0f6f6;
            border-radius: 5px;
        }
        
        .cookie-test h4 {
            margin-bottom: 10px;
            color: #1a1a2e;
        }
        
        .cookie-value {
            font-family: monospace;
            background: #e9ecef;
            padding: 10px;
            border-radius: 3px;
            word-break: break-all;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <nav>
            <div class="logo">🍪 LGPD Cookie Manager</div>
            <ul class="nav-links">
                <li><a href="#features">Recursos</a></li>
                <li><a href="#demo">Demonstração</a></li>
                <li><a href="#" onclick="abrirPreferencias(); return false;">⚙️ Preferências</a></li>
            </ul>
        </nav>
    </header>

    <!-- Aviso File Protocol -->
    <div class="file-warning" id="fileWarning">
        <h4>⚠️ Atenção: Rodando localmente (file://)</h4>
        <p>
            Os cookies podem não ser salvos corretamente quando o arquivo é aberto diretamente. 
            Para melhor funcionamento, use um servidor local:
            <code>python -m http.server 8000</code> ou 
            <code>Live Server do VS Code</code>
        </p>
    </div>

    <!-- Hero Section -->
    <section class="hero">
        <h1>Sistema de Cookies LGPD</h1>
        <p>Conformidade total com a Lei Geral de Proteção de Dados</p>
        <div class="cta-buttons">
            <button class="btn btn-primary" onclick="mostrarBanner()">Ver Banner de Cookies</button>
            <button class="btn btn-secondary" onclick="abrirPreferencias()">Gerenciar Preferências</button>
        </div>
    </section>

    <!-- Status Dashboard -->
    <section class="dashboard">
        <div class="status-grid">
            <!-- Card Cookies Necessários -->
            <div class="status-card">
                <h3>
                    <span class="status-icon status-active">✓</span>
                    Cookies Necessários
                </h3>
                <div class="cookie-item">
                    <span>lgpd_cookie_consent</span>
                    <span class="badge badge-success">Sempre Ativo</span>
                </div>
                <p style="margin-top: 20px; color: #666; font-size: 0.9rem;">
                    Essenciais para o funcionamento do site
                </p>
            </div>

            <!-- Card Analytics -->
            <div class="status-card">
                <h3>
                    <span class="status-icon" id="analytics-icon">?</span>
                    Cookies Analytics
                </h3>
                <div class="cookie-item">
                    <span>Google Analytics</span>
                    <span class="badge" id="ga-status">Verificando...</span>
                </div>
                <div id="analytics-info" style="margin-top: 20px; color: #666; font-size: 0.9rem;">
                    Status será atualizado após consentimento
                </div>
            </div>

            <!-- Card Marketing -->
            <div class="status-card">
                <h3>
                    <span class="status-icon" id="marketing-icon">?</span>
                    Cookies Marketing
                </h3>
                <div class="cookie-item">
                    <span>Facebook Pixel</span>
                    <span class="badge" id="fb-status">Verificando...</span>
                </div>
                <div id="marketing-info" style="margin-top: 20px; color: #666; font-size: 0.9rem;">
                    Status será atualizado após consentimento
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features">
        <div class="features-container">
            <h2>Recursos do Sistema</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">📋</div>
                    <h3>Conformidade LGPD</h3>
                    <p>100% compatível com a Lei N° 13.709/18, garantindo transparência e controle ao usuário</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">🔧</div>
                    <h3>Fácil Configuração</h3>
                    <p>Integração simples com arquivos locais, sem dependências externas</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">🎨</div>
                    <h3>Totalmente Personalizável</h3>
                    <p>Interface adaptável ao design do seu site com CSS customizado</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Demo Section -->
    <section class="demo-section" id="demo">
        <div class="demo-container">
            <h2>Área de Demonstração</h2>
            
            <div class="demo-grid">
                <button class="demo-button" onclick="mostrarBanner()">
                    🍪 Mostrar Banner
                </button>
                <button class="demo-button" onclick="abrirPreferencias()">
                    ⚙️ Preferências
                </button>
                <button class="demo-button" onclick="aceitarTodos()">
                    ✅ Aceitar Todos
                </button>
                <button class="demo-button" onclick="aceitarNecessarios()">
                    🔒 Apenas Necessários
                </button>
                <button class="demo-button" onclick="verificarStatus()">
                    📊 Verificar Status
                </button>
                <button class="demo-button" onclick="resetarCookies()">
                    🗑️ Resetar Tudo
                </button>
            </div>

            <div class="cookie-test">
                <h4>🧪 Teste de Cookies Salvos:</h4>
                <div class="cookie-value" id="cookie-display">
                    Clique em "Verificar Status" para ver os cookies salvos
                </div>
            </div>

            <div class="console" id="console">
                <div class="console-line">$ Sistema LGPD inicializado...</div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-links">
            <a href="/politica-privacidade">Política de Privacidade</a>
            <a href="/termos-uso">Termos de Uso</a>
            <a href="/contato">Contato</a>
            <a href="#" onclick="abrirPreferencias(); return false;">Configurações de Cookies</a>
        </div>
        <p>&copy; 2024 LGPD Cookie Manager. Todos os direitos reservados.</p>
    </footer>

    <!-- Scripts Locais -->
    <script src="js/cookieconsent.umd.js"></script>
    
    <!-- Configuração LGPD -->
    <script>
    // Garante que CookieConsent esteja global
    window.CookieConsent = window.CookieConsent || CookieConsent;
    
    // Funções auxiliares para o console
    function addConsoleLog(message) {
        const console = document.getElementById('console');
        const line = document.createElement('div');
        line.className = 'console-line';
        line.textContent = '$ ' + message;
        console.appendChild(line);
        console.scrollTop = console.scrollHeight;
    }

    // Funções de demonstração
    function mostrarBanner() {
        console.log('Mostrando banner...');
        CookieConsent.show(true);
        addConsoleLog('Banner de cookies exibido');
    }

    function abrirPreferencias() {
        console.log('Abrindo preferências...');
        CookieConsent.showPreferences();
        addConsoleLog('Modal de preferências aberto');
        return false; // Previne navegação do link
    }

    function aceitarTodos() {
        CookieConsent.acceptCategory('all');
        addConsoleLog('Todos os cookies aceitos');
        // Força atualização após aceitar
        setTimeout(() => {
            updateStatusDisplay();
            const saved = CookieConsent.getCookie();
            console.log('Cookie após aceitar todos:', saved);
        }, 500);
    }

    function aceitarNecessarios() {
        CookieConsent.acceptCategory([]);
        addConsoleLog('Apenas cookies necessários aceitos');
    }

    function verificarStatus() {
        const preferences = CookieConsent.getUserPreferences();
        const cookieData = CookieConsent.getCookie();
        
        // Verifica também localStorage e cookies normais
        const localStorageData = localStorage.getItem('lgpd_cookie_consent');
        const normalCookie = document.cookie.includes('lgpd_cookie_consent');
        
        document.getElementById('cookie-display').innerHTML = 
            '<strong>Preferências do Usuário:</strong><br>' +
            JSON.stringify(preferences, null, 2) +
            '<br><br><strong>Cookie Salvo:</strong><br>' +
            JSON.stringify(cookieData, null, 2) +
            '<br><br><strong>Método de Armazenamento:</strong><br>' +
            (localStorageData ? '📦 localStorage (file://)' : '🍪 Cookie normal (http://)') +
            '<br>Cookie existe: ' + (normalCookie ? 'Sim' : 'Não') +
            '<br>LocalStorage existe: ' + (localStorageData ? 'Sim' : 'Não');
            
        addConsoleLog('Status verificado - veja acima');
        updateStatusDisplay();
    }

    function resetarCookies() {
        if (confirm('Isso irá apagar todas as preferências de cookies. Continuar?')) {
            // Remove localStorage
            localStorage.removeItem('lgpd_cookie_consent');
            
            // Tenta remover cookie também
            document.cookie = 'lgpd_cookie_consent=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
            
            // Reset do CookieConsent
            CookieConsent.reset(true);
            
            addConsoleLog('🗑️ Todas as preferências foram resetadas');
            
            // Recarrega após um pequeno delay
            setTimeout(() => {
                location.reload();
            }, 500);
        }
    }

    // Atualiza o display de status
    function updateStatusDisplay() {
        const analyticsAccepted = CookieConsent.acceptedCategory('analytics');
        const marketingAccepted = CookieConsent.acceptedCategory('marketing');
        
        // Analytics
        const analyticsIcon = document.getElementById('analytics-icon');
        const gaStatus = document.getElementById('ga-status');
        const analyticsInfo = document.getElementById('analytics-info');
        
        if (analyticsAccepted) {
            analyticsIcon.className = 'status-icon status-active';
            analyticsIcon.textContent = '✓';
            gaStatus.className = 'badge badge-success';
            gaStatus.textContent = 'Ativo';
            analyticsInfo.textContent = 'Google Analytics está coletando dados';
        } else {
            analyticsIcon.className = 'status-icon status-inactive';
            analyticsIcon.textContent = '✗';
            gaStatus.className = 'badge badge-danger';
            gaStatus.textContent = 'Bloqueado';
            analyticsInfo.textContent = 'Nenhum dado de analytics sendo coletado';
        }
        
        // Marketing
        const marketingIcon = document.getElementById('marketing-icon');
        const fbStatus = document.getElementById('fb-status');
        const marketingInfo = document.getElementById('marketing-info');
        
        if (marketingAccepted) {
            marketingIcon.className = 'status-icon status-active';
            marketingIcon.textContent = '✓';
            fbStatus.className = 'badge badge-success';
            fbStatus.textContent = 'Ativo';
            marketingInfo.textContent = 'Facebook Pixel está rastreando';
        } else {
            marketingIcon.className = 'status-icon status-inactive';
            marketingIcon.textContent = '✗';
            fbStatus.className = 'badge badge-danger';
            fbStatus.textContent = 'Bloqueado';
            marketingInfo.textContent = 'Nenhum rastreamento de marketing ativo';
        }
    }

    // Configuração do CookieConsent
    window.addEventListener('load', function() {
        // Pequeno delay para garantir que tudo carregou
        setTimeout(function() {
            // Verifica se CookieConsent está disponível
            if (typeof CookieConsent === 'undefined' || !CookieConsent.run) {
                console.error('CookieConsent não está disponível!');
                addConsoleLog('❌ Erro: CookieConsent não carregou');
                return;
            }
            
            // Detecta se está rodando em file://
            const isFileProtocol = window.location.protocol === 'file:';
            
            if (isFileProtocol) {
                addConsoleLog('⚠️ Detectado protocolo file:// - usando localStorage');
                console.warn('Rodando localmente - cookies podem não funcionar corretamente. Use um servidor local para melhor funcionamento.');
                
                // Mostra aviso visual
                document.getElementById('fileWarning').classList.add('show');
            }
            
            try {
                CookieConsent.run({
            current_lang: 'pt',
            autoclear_cookies: true,
            page_scripts: true,
            mode: 'opt-in',
            revision: 1,
            autoShow: true,
            hideFromBots: true,
            disablePageInteraction: false, // Permite interação com a página
            
            cookie: {
                name: 'lgpd_cookie_consent',
                domain: location.hostname,
                path: '/',
                sameSite: 'Lax',
                expiresAfterDays: 365,
            },
            
            gui_options: {
                consent_modal: {
                    layout: 'cloud',
                    position: 'bottom center',
                    transition: 'slide',
                },
                settings_modal: {
                    layout: 'box',
                    transition: 'slide'
                }
            },

            onAccept: function(cookie) {
                console.log('onAccept disparado:', cookie);
                addConsoleLog('✅ Cookies aceitos!');
            },
            
            onChange: function(cookie, changed_preferences) {
                console.log('onChange disparado:', cookie, changed_preferences);
                addConsoleLog('Preferências alteradas: ' + JSON.stringify(changed_preferences));
                updateStatusDisplay();
            },

            onFirstAction: function(user_preferences, cookie) {
                console.log('onFirstAction disparado:', user_preferences, cookie);
                addConsoleLog('Primeira ação do usuário registrada');
            },
            
            onConsent: function(cookie) {
                console.log('onConsent disparado:', cookie);
                addConsoleLog('✅ Consentimento registrado e salvo');
                
                // Força salvamento em localStorage se estiver em file://
                if (isFileProtocol && cookie) {
                    try {
                        localStorage.setItem('lgpd_cookie_consent', JSON.stringify(cookie));
                        console.log('Cookie forçado em localStorage devido a file://');
                    } catch (e) {
                        console.error('Erro ao salvar em localStorage:', e);
                    }
                }
                
                updateStatusDisplay();
            },

            onModalShow: function(modal) {
                addConsoleLog('Modal ' + modal.modalName + ' exibido');
            },

            onModalReady: function(modal) {
                addConsoleLog('Modal ' + modal.modalName + ' pronto');
            },

            categories: {
                necessary: {
                    enabled: true,
                    readOnly: true
                },
                analytics: {
                    autoClear: {
                        cookies: [
                            {
                                name: /^_ga/,
                            },
                            {
                                name: '_gid',
                            }
                        ]
                    }
                },
                marketing: {
                    autoClear: {
                        cookies: [
                            {
                                name: '_fbp',
                            }
                        ]
                    }
                }
            },

            language: {
                default: 'pt',
                translations: {
                    pt: {
                        consentModal: {
                            title: '🍪 Nós usamos cookies!',
                            description: 'Respeitando a Lei Geral de Proteção de Dados Pessoais (LGPD - Lei N° 13.709/18), este site é transparente e permite você gerenciar suas preferências de aceites de cookies e mais. Clique em "preferências" para acessar nosso Portal de Privacidade.',
                            acceptAllBtn: 'Aceitar todos',
                            acceptNecessaryBtn: 'Apenas necessários',
                            showPreferencesBtn: 'Gerenciar preferências',
                            footer: '<a href="#politica-privacidade">Política de Privacidade</a> | <a href="#termos">Termos de Uso</a>'
                        },
                        preferencesModal: {
                            title: 'Central de Preferências de Privacidade',
                            acceptAllBtn: 'Aceitar todos',
                            acceptNecessaryBtn: 'Rejeitar todos',
                            savePreferencesBtn: 'Salvar configurações',
                            closeIconLabel: 'Fechar',
                            serviceCounterLabel: 'Serviço|Serviços',
                            sections: [
                                {
                                    title: 'Uso de Cookies 📢',
                                    description: 'Utilizamos cookies para garantir as funcionalidades básicas do site e melhorar sua experiência online. Você pode escolher ativar/desativar cada categoria quando quiser.'
                                },
                                {
                                    title: 'Cookies Estritamente Necessários',
                                    description: 'Estes cookies são essenciais para o funcionamento adequado do site. Sem estes cookies, o site não funcionaria corretamente.',
                                    linkedCategory: 'necessary',
                                    cookieTable: {
                                        headers: {
                                            name: 'Nome',
                                            domain: 'Domínio',
                                            expiration: 'Expiração',
                                            description: 'Descrição'
                                        },
                                        body: [
                                            {
                                                name: 'lgpd_cookie_consent',
                                                domain: location.hostname,
                                                expiration: '1 ano',
                                                description: 'Armazena suas preferências de cookies'
                                            }
                                        ]
                                    }
                                },
                                {
                                    title: 'Cookies de Analytics e Desempenho',
                                    description: 'Estes cookies nos permitem medir e melhorar o desempenho do nosso site. Todas as informações coletadas são anônimas.',
                                    linkedCategory: 'analytics',
                                    cookieTable: {
                                        headers: {
                                            name: 'Nome',
                                            domain: 'Domínio',
                                            expiration: 'Expiração',
                                            description: 'Descrição'
                                        },
                                        body: [
                                            {
                                                name: '_ga',
                                                domain: 'google.com',
                                                expiration: '2 anos',
                                                description: 'Registra um ID único para gerar dados estatísticos'
                                            },
                                            {
                                                name: '_gid',
                                                domain: 'google.com',
                                                expiration: '24 horas',
                                                description: 'Armazena e atualiza um valor único para cada página'
                                            }
                                        ]
                                    }
                                },
                                {
                                    title: 'Cookies de Marketing e Publicidade',
                                    description: 'Estes cookies são usados para tornar as mensagens publicitárias mais relevantes para você e seus interesses.',
                                    linkedCategory: 'marketing',
                                    cookieTable: {
                                        headers: {
                                            name: 'Nome',
                                            domain: 'Domínio',
                                            expiration: 'Expiração',
                                            description: 'Descrição'
                                        },
                                        body: [
                                            {
                                                name: '_fbp',
                                                domain: 'facebook.com',
                                                expiration: '3 meses',
                                                description: 'Usado pelo Facebook para entregar publicidade personalizada'
                                            }
                                        ]
                                    }
                                },
                                {
                                    title: 'Mais informações',
                                    description: 'Para qualquer dúvida sobre nossa política de cookies, entre em contato através do e-mail <a href="mailto:privacidade@exemplo.com">privacidade@exemplo.com</a>.'
                                }
                            ]
                        }
                    }
                }
            }
        });
        
        console.log('CookieConsent.run() executado com sucesso!');
        
        } catch (error) {
            console.error('Erro ao inicializar CookieConsent:', error);
            addConsoleLog('❌ Erro ao inicializar: ' + error.message);
        }

        // Atualiza status inicial
        setTimeout(updateStatusDisplay, 1000);
        addConsoleLog('Sistema LGPD configurado e rodando!');
        
        // Verifica se já tem preferências salvas
        setTimeout(() => {
            const saved = CookieConsent.getCookie();
            if (saved) {
                addConsoleLog('✅ Preferências anteriores encontradas e carregadas');
            } else {
                addConsoleLog('ℹ️ Nenhuma preferência salva encontrada');
            }
        }, 1500);
        
        }, 100); // Delay de 100ms
    });
    </script>

    <!-- Scripts condicionais (só carregam com consentimento) -->
    <script type="text/plain" data-category="analytics">
        // Google Analytics
        console.log('Google Analytics carregado!');
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'GA_MEASUREMENT_ID');
        
        // Simulação para demo
        addConsoleLog('📊 Google Analytics inicializado');
    </script>

    <script type="text/plain" data-category="marketing">
        // Facebook Pixel
        console.log('Facebook Pixel carregado!');
        !function(f,b,e,v,n,t,s)
        {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window, document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
        
        // Simulação para demo
        addConsoleLog('📱 Facebook Pixel inicializado');
    </script>
</body>
</html>